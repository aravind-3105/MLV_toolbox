<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
                "http://www.w3.org/TR/REC-html40/loose.dtd">
<html>
<head>
  <title>Description of boxesData</title>
  <meta name="keywords" content="boxesData">
  <meta name="description" content="Get ground truth data for object proposal bounding box evaluation.">
  <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
  <meta name="generator" content="m2html v1.5 &copy; 2003-2005 Guillaume Flandin">
  <meta name="robots" content="index, follow">
  <link type="text/css" rel="stylesheet" href="../../m2html.css">
</head>
<body>
<a name="_top"></a>
<div><a href="../../index.html">Home</a> &gt;  <a href="../index.html">MLVcode</a> &gt; <a href="index.html">edges-master</a> &gt; boxesData.m</div>

<!--<table width="100%"><tr><td align="left"><a href="../../index.html"><img alt="<" border="0" src="../../left.png">&nbsp;Master index</a></td>
<td align="right"><a href="index.html">Index for MLVcode\edges-master&nbsp;<img alt=">" border="0" src="../../right.png"></a></td></tr></table>-->

<h1>boxesData
</h1>

<h2><a name="_name"></a>PURPOSE <a href="#_top"><img alt="^" border="0" src="../../up.png"></a></h2>
<div class="box"><strong>Get ground truth data for object proposal bounding box evaluation.</strong></div>

<h2><a name="_synopsis"></a>SYNOPSIS <a href="#_top"><img alt="^" border="0" src="../../up.png"></a></h2>
<div class="box"><strong>function data = boxesData( varargin ) </strong></div>

<h2><a name="_description"></a>DESCRIPTION <a href="#_top"><img alt="^" border="0" src="../../up.png"></a></h2>
<div class="fragment"><pre class="comment"> Get ground truth data for object proposal bounding box evaluation.

 Used to get dataset information for evaluation of bounding box object
 proposals using boxesEval.m. This requires separate download of the
 appropriate dataset first. Currently only set up for PASCAL VOC 2007 but
 it would be fairly simple to extend to other datasets.

 As a first step, it is necessary to download the PASCAL VOC 2007 dataset.
 Go to http://pascallin.ecs.soton.ac.uk/challenges/VOC/voc2007/ and get:
  VOCdevkit_08-Jun-2007, VOCtrainval_06-Nov-2007, VOCtest_06-Nov-2007
 After downloading these files extract them to dataDir='boxes/VOCdevkit'.
 Once complete this function will process the data and return information
 in a convenient format for boxesEval.m.

 USAGE
  data = boxesData( opts )

 INPUTS
  opts       - parameters (struct or name/value pairs)
   .resDir     - ['boxes/'] location for results and evaluation
   .dataDir    - ['boxes/VOCdevkit/'] dir containing PASCAL VOC 2007
   .split      - ['val'] data split for evaluation

 OUTPUTS
  data       - dataset split information
   .split      - data split for evaluation
   .n          - number of images
   .ids        - list of string ids
   .imgs       - list of image filenames
   .gt         - ground truth for each image

 EXAMPLE

 See also <a href="edgeBoxesDemo.html" class="code" title="">edgeBoxesDemo</a>, <a href="edgeBoxes.html" class="code" title="function bbs = edgeBoxes( I, model, varargin )">edgeBoxes</a>, <a href="boxesEval.html" class="code" title="function recall = boxesEval( varargin )">boxesEval</a>

 Structured Edge Detection Toolbox      Version 3.01
 Code written by Piotr Dollar and Larry Zitnick, 2014.
 Licensed under the MSR-LA Full Rights License [see license.txt]</pre></div>

<!-- crossreference -->
<h2><a name="_cross"></a>CROSS-REFERENCE INFORMATION <a href="#_top"><img alt="^" border="0" src="../../up.png"></a></h2>
This function calls:
<ul style="list-style-image:url(../../matlabicon.gif)">
</ul>
This function is called by:
<ul style="list-style-image:url(../../matlabicon.gif)">
<li><a href="edgeBoxesDemo.html" class="code" title="">edgeBoxesDemo</a>	Demo for Edge Boxes (please see readme.txt first).</li><li><a href="edgeBoxesSweeps.html" class="code" title="function edgeBoxesSweeps()">edgeBoxesSweeps</a>	Parameter sweeps for Edges Boxes object proposals.</li></ul>
<!-- crossreference -->



<h2><a name="_source"></a>SOURCE CODE <a href="#_top"><img alt="^" border="0" src="../../up.png"></a></h2>
<div class="fragment"><pre>0001 <a name="_sub0" href="#_subfunctions" class="code">function data = boxesData( varargin )</a>
0002 <span class="comment">% Get ground truth data for object proposal bounding box evaluation.</span>
0003 <span class="comment">%</span>
0004 <span class="comment">% Used to get dataset information for evaluation of bounding box object</span>
0005 <span class="comment">% proposals using boxesEval.m. This requires separate download of the</span>
0006 <span class="comment">% appropriate dataset first. Currently only set up for PASCAL VOC 2007 but</span>
0007 <span class="comment">% it would be fairly simple to extend to other datasets.</span>
0008 <span class="comment">%</span>
0009 <span class="comment">% As a first step, it is necessary to download the PASCAL VOC 2007 dataset.</span>
0010 <span class="comment">% Go to http://pascallin.ecs.soton.ac.uk/challenges/VOC/voc2007/ and get:</span>
0011 <span class="comment">%  VOCdevkit_08-Jun-2007, VOCtrainval_06-Nov-2007, VOCtest_06-Nov-2007</span>
0012 <span class="comment">% After downloading these files extract them to dataDir='boxes/VOCdevkit'.</span>
0013 <span class="comment">% Once complete this function will process the data and return information</span>
0014 <span class="comment">% in a convenient format for boxesEval.m.</span>
0015 <span class="comment">%</span>
0016 <span class="comment">% USAGE</span>
0017 <span class="comment">%  data = boxesData( opts )</span>
0018 <span class="comment">%</span>
0019 <span class="comment">% INPUTS</span>
0020 <span class="comment">%  opts       - parameters (struct or name/value pairs)</span>
0021 <span class="comment">%   .resDir     - ['boxes/'] location for results and evaluation</span>
0022 <span class="comment">%   .dataDir    - ['boxes/VOCdevkit/'] dir containing PASCAL VOC 2007</span>
0023 <span class="comment">%   .split      - ['val'] data split for evaluation</span>
0024 <span class="comment">%</span>
0025 <span class="comment">% OUTPUTS</span>
0026 <span class="comment">%  data       - dataset split information</span>
0027 <span class="comment">%   .split      - data split for evaluation</span>
0028 <span class="comment">%   .n          - number of images</span>
0029 <span class="comment">%   .ids        - list of string ids</span>
0030 <span class="comment">%   .imgs       - list of image filenames</span>
0031 <span class="comment">%   .gt         - ground truth for each image</span>
0032 <span class="comment">%</span>
0033 <span class="comment">% EXAMPLE</span>
0034 <span class="comment">%</span>
0035 <span class="comment">% See also edgeBoxesDemo, edgeBoxes, boxesEval</span>
0036 <span class="comment">%</span>
0037 <span class="comment">% Structured Edge Detection Toolbox      Version 3.01</span>
0038 <span class="comment">% Code written by Piotr Dollar and Larry Zitnick, 2014.</span>
0039 <span class="comment">% Licensed under the MSR-LA Full Rights License [see license.txt]</span>
0040 
0041 <span class="comment">% get default parameters (unimportant parameters are undocumented)</span>
0042 dfs={ <span class="string">'resDir'</span>,<span class="string">'boxes/'</span>, <span class="string">'dataDir'</span>,<span class="string">'boxes/VOCdevkit/'</span>, <span class="string">'split'</span>,<span class="string">'val'</span> };
0043 o=getPrmDflt(varargin,dfs,1);
0044 
0045 <span class="comment">% locations of PASCAL VOC dataset</span>
0046 <span class="keyword">if</span>(~exist(o.dataDir,<span class="string">'dir'</span>)), error(<span class="string">'dataset not found, see help'</span>); <span class="keyword">end</span>
0047 imDir=[o.dataDir <span class="string">'VOC2007/JPEGImages/'</span>];
0048 gtDir=[o.dataDir <span class="string">'VOC2007/Annotations/'</span>];
0049 imList=[o.dataDir <span class="string">'VOC2007/ImageSets/Main/'</span> o.split <span class="string">'.txt'</span>];
0050 addpath(genpath([o.dataDir <span class="string">'VOCcode'</span>]));
0051 
0052 <span class="comment">% check if data already exists, if yes load and return</span>
0053 dataNm=[o.resDir <span class="string">'/GroundTruth'</span> <span class="string">'-'</span> o.split <span class="string">'.mat'</span>];
0054 <span class="keyword">if</span>(exist(dataNm,<span class="string">'file'</span>)), data=load(dataNm); data=data.data; <span class="keyword">return</span>; <span class="keyword">end</span>
0055 
0056 <span class="comment">% get list of image ids</span>
0057 <span class="keyword">if</span>(~exist(imList,<span class="string">'file'</span>)), error(<span class="string">'ids file not found'</span>); <span class="keyword">end</span>
0058 f=fopen(imList); ids=textscan(f,<span class="string">'%s %*s'</span>); ids=ids{1}; fclose(f);
0059 
0060 <span class="comment">% generate list of image and gt filenames then load gt</span>
0061 n=length(ids); imgs=cell(n,1); gt=cell(n,1);
0062 <span class="keyword">for</span> i=1:n, imgs{i}=[imDir ids{i} <span class="string">'.jpg'</span>]; <span class="keyword">end</span>
0063 <span class="keyword">for</span> i=1:n, gt{i}=[gtDir ids{i} <span class="string">'.xml'</span>]; <span class="keyword">end</span>
0064 <span class="keyword">if</span>(~exist(imgs{1},<span class="string">'file'</span>)), error(<span class="string">'images not found'</span>); <span class="keyword">end</span>
0065 <span class="keyword">if</span>(~exist(gt{1},<span class="string">'file'</span>)), error(<span class="string">'annotations not found'</span>); <span class="keyword">end</span>
0066 parfor i=1:n, [~,gt{i}]=bbGt(<span class="string">'bbLoad'</span>,gt{i},<span class="string">'format'</span>,1); <span class="keyword">end</span>
0067 
0068 <span class="comment">% create output structure and cache to disk</span>
0069 data=struct(<span class="string">'split'</span>,o.split,<span class="string">'n'</span>,n,<span class="string">'ids'</span>,{ids},<span class="string">'imgs'</span>,{imgs},<span class="string">'gt'</span>,{gt});
0070 <span class="keyword">if</span>(~exist(o.resDir,<span class="string">'dir'</span>)), mkdir(resDir); <span class="keyword">end</span>; save(dataNm,<span class="string">'data'</span>);
0071 
0072 <span class="keyword">end</span></pre></div>
<hr><address>Generated on Thu 05-May-2022 14:52:24 by <strong><a href="http://www.artefact.tk/software/matlab/m2html/" title="Matlab Documentation in HTML">m2html</a></strong> &copy; 2005</address>
</body>
</html>