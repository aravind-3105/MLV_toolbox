<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
                "http://www.w3.org/TR/REC-html40/loose.dtd">
<html>
<head>
  <title>Description of pca_apply</title>
  <meta name="keywords" content="pca_apply">
  <meta name="description" content="Companion function to pca.">
  <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
  <meta name="generator" content="m2html v1.5 &copy; 2003-2005 Guillaume Flandin">
  <meta name="robots" content="index, follow">
  <link type="text/css" rel="stylesheet" href="../../../../../m2html.css">
</head>
<body>
<a name="_top"></a>
<div><a href="../../../../../index.html">Home</a> &gt;  <a href="../../../../index.html">MLVcode</a> &gt; <a href="../../../index.html">edges-master</a> &gt; <a href="#">toolbox-master</a> &gt; <a href="../index.html">external</a> &gt; <a href="index.html">deprecated</a> &gt; pca_apply.m</div>

<!--<table width="100%"><tr><td align="left"><a href="../../../../../index.html"><img alt="<" border="0" src="../../../../../left.png">&nbsp;Master index</a></td>
<td align="right"><a href="index.html">Index for MLVcode\edges-master\toolbox-master\external\deprecated&nbsp;<img alt=">" border="0" src="../../../../../right.png"></a></td></tr></table>-->

<h1>pca_apply
</h1>

<h2><a name="_name"></a>PURPOSE <a href="#_top"><img alt="^" border="0" src="../../../../../up.png"></a></h2>
<div class="box"><strong>Companion function to pca.</strong></div>

<h2><a name="_synopsis"></a>SYNOPSIS <a href="#_top"><img alt="^" border="0" src="../../../../../up.png"></a></h2>
<div class="box"><strong>function [Yk,Xhat,avsq,avsqOrig] = pca_apply(X,U,mu,vars,k) %#ok<INUSL> </strong></div>

<h2><a name="_description"></a>DESCRIPTION <a href="#_top"><img alt="^" border="0" src="../../../../../up.png"></a></h2>
<div class="fragment"><pre class="comment"> Companion function to pca.

 Use pca to retrieve the principal components U and the mean mu from a
 set fo vectors X1 via [U,mu,vars] = pca(X1).  Then given a new
 vector x, use y = pca_apply( x, U, mu, vars, k ) to get the first k
 coefficients of x in the space spanned by the columns of U. See pca for
 general information.

 This may prove useful:
  siz = size(X);  k = 100;
  Uim = reshape( U(:,1:k), [ siz(1:end-1) k ]  );

 USAGE
  [ Yk, Xhat, avsq, avsqOrig ] = pca_apply( X, U, mu, vars, k )

 INPUTS
  X           - array for which to get PCA coefficients
  U           - [returned by pca] -- see pca
  mu          - [returned by pca] -- see pca
  vars        - [returned by pca] -- see pca
  k           - number of principal coordinates to approximate X with

 OUTPUTS
  Yk          - first k coordinates of X in column space of U
  Xhat        - approximation of X corresponding to Yk
  avsq        - measure of squared error normalized to fall between [0,1]

 EXAMPLE

 See also PCA, PCA_VISUALIZE</pre></div>

<!-- crossreference -->
<h2><a name="_cross"></a>CROSS-REFERENCE INFORMATION <a href="#_top"><img alt="^" border="0" src="../../../../../up.png"></a></h2>
This function calls:
<ul style="list-style-image:url(../../../../../matlabicon.gif)">
</ul>
This function is called by:
<ul style="list-style-image:url(../../../../../matlabicon.gif)">
<li><a href="pca_apply_large.html" class="code" title="function [ Yk, Xhat, avsq ] = pca_apply_large( X, U, mu, vars, k )">pca_apply_large</a>	Wrapper for pca_apply that allows for application to large X.</li></ul>
<!-- crossreference -->



<h2><a name="_source"></a>SOURCE CODE <a href="#_top"><img alt="^" border="0" src="../../../../../up.png"></a></h2>
<div class="fragment"><pre>0001 <span class="comment">% Companion function to pca.</span>
0002 <span class="comment">%</span>
0003 <span class="comment">% Use pca to retrieve the principal components U and the mean mu from a</span>
0004 <span class="comment">% set fo vectors X1 via [U,mu,vars] = pca(X1).  Then given a new</span>
0005 <span class="comment">% vector x, use y = pca_apply( x, U, mu, vars, k ) to get the first k</span>
0006 <span class="comment">% coefficients of x in the space spanned by the columns of U. See pca for</span>
0007 <span class="comment">% general information.</span>
0008 <span class="comment">%</span>
0009 <span class="comment">% This may prove useful:</span>
0010 <span class="comment">%  siz = size(X);  k = 100;</span>
0011 <span class="comment">%  Uim = reshape( U(:,1:k), [ siz(1:end-1) k ]  );</span>
0012 <span class="comment">%</span>
0013 <span class="comment">% USAGE</span>
0014 <span class="comment">%  [ Yk, Xhat, avsq, avsqOrig ] = pca_apply( X, U, mu, vars, k )</span>
0015 <span class="comment">%</span>
0016 <span class="comment">% INPUTS</span>
0017 <span class="comment">%  X           - array for which to get PCA coefficients</span>
0018 <span class="comment">%  U           - [returned by pca] -- see pca</span>
0019 <span class="comment">%  mu          - [returned by pca] -- see pca</span>
0020 <span class="comment">%  vars        - [returned by pca] -- see pca</span>
0021 <span class="comment">%  k           - number of principal coordinates to approximate X with</span>
0022 <span class="comment">%</span>
0023 <span class="comment">% OUTPUTS</span>
0024 <span class="comment">%  Yk          - first k coordinates of X in column space of U</span>
0025 <span class="comment">%  Xhat        - approximation of X corresponding to Yk</span>
0026 <span class="comment">%  avsq        - measure of squared error normalized to fall between [0,1]</span>
0027 <span class="comment">%</span>
0028 <span class="comment">% EXAMPLE</span>
0029 <span class="comment">%</span>
0030 <span class="comment">% See also PCA, PCA_VISUALIZE</span>
0031 
0032 <span class="comment">% Piotr's Image&amp;Video Toolbox      Version 1.5</span>
0033 <span class="comment">% Written and maintained by Piotr Dollar    pdollar-at-cs.ucsd.edu</span>
0034 <span class="comment">% Please email me if you find bugs, or have suggestions or questions!</span>
0035 
0036 <a name="_sub0" href="#_subfunctions" class="code">function [Yk,Xhat,avsq,avsqOrig] = pca_apply(X,U,mu,vars,k) </a><span class="comment">%#ok&lt;INUSL&gt;</span>
0037 
0038 siz = size(X); nd = ndims(X);  [N,r]  = size(U);
0039 <span class="keyword">if</span>(N==prod(siz) &amp;&amp; ~(nd==2 &amp;&amp; siz(2)==1)); siz=[siz, 1]; nd=nd+1; <span class="keyword">end</span>
0040 inds = {<span class="string">':'</span>}; inds = inds(:,ones(1,nd-1));
0041 d= prod(siz(1:end-1));
0042 
0043 <span class="comment">% some error checking</span>
0044 <span class="keyword">if</span>(d~=N); error(<span class="string">'incorrect size for X or U'</span>); <span class="keyword">end</span>
0045 <span class="keyword">if</span>(isa(X,<span class="string">'uint8'</span>)); X = double(X); <span class="keyword">end</span>
0046 <span class="keyword">if</span>( k&gt;r )
0047   warning([<span class="string">'Only '</span> int2str(r) <span class="string">'&lt;k comp. available.'</span>]); <span class="comment">%#ok&lt;WNTAG&gt;</span>
0048   k=r;
0049 <span class="keyword">end</span>
0050 
0051 <span class="comment">% subtract mean, then flatten X</span>
0052 Xorig = X;
0053 murep = mu( inds{:}, ones(1,siz(end)));
0054 X = X - murep;
0055 X = reshape(X, d, [] );
0056 
0057 <span class="comment">% Find Yk, the first k coefficients of X in the new basis</span>
0058 k = min( r, k );
0059 Uk = U(:,1:k);
0060 Yk = Uk' * X;
0061 
0062 <span class="comment">% calculate Xhat - the approx of X using the first k princ components</span>
0063 <span class="keyword">if</span>( nargout&gt;1 )
0064   Xhat = Uk * Yk;
0065   Xhat = reshape( Xhat, siz );
0066   Xhat = Xhat + murep;
0067 <span class="keyword">end</span>
0068 
0069 <span class="comment">% caclulate average value of (Xhat-Xorig).^2 compared to average value</span>
0070 <span class="comment">% of X.^2, where X is Xorig without the mean.  This is equivalent to</span>
0071 <span class="comment">% what fraction of the variance is captured by Xhat.</span>
0072 <span class="keyword">if</span>( nargout&gt;2 )
0073   avsq = Xhat - Xorig;
0074   avsq = dot(avsq(:),avsq(:));
0075   avsqOrig = dot(X(:),X(:));
0076   <span class="keyword">if</span> (nargout==3)
0077     avsq = avsq / avsqOrig;
0078   <span class="keyword">end</span>
0079 <span class="keyword">end</span></pre></div>
<hr><address>Generated on Thu 05-May-2022 15:20:21 by <strong><a href="http://www.artefact.tk/software/matlab/m2html/" title="Matlab Documentation in HTML">m2html</a></strong> &copy; 2005</address>
</body>
</html>