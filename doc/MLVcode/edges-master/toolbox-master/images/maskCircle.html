<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
                "http://www.w3.org/TR/REC-html40/loose.dtd">
<html>
<head>
  <title>Description of maskCircle</title>
  <meta name="keywords" content="maskCircle">
  <meta name="description" content="Creates an image of a 'pie slice' of a circle.">
  <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
  <meta name="generator" content="m2html v1.5 &copy; 2003-2005 Guillaume Flandin">
  <meta name="robots" content="index, follow">
  <link type="text/css" rel="stylesheet" href="../../../../m2html.css">
</head>
<body>
<a name="_top"></a>
<div><a href="../../../../index.html">Home</a> &gt;  <a href="../../../index.html">MLVcode</a> &gt; <a href="../../index.html">edges-master</a> &gt; <a href="#">toolbox-master</a> &gt; <a href="index.html">images</a> &gt; maskCircle.m</div>

<!--<table width="100%"><tr><td align="left"><a href="../../../../index.html"><img alt="<" border="0" src="../../../../left.png">&nbsp;Master index</a></td>
<td align="right"><a href="index.html">Index for MLVcode\edges-master\toolbox-master\images&nbsp;<img alt=">" border="0" src="../../../../right.png"></a></td></tr></table>-->

<h1>maskCircle
</h1>

<h2><a name="_name"></a>PURPOSE <a href="#_top"><img alt="^" border="0" src="../../../../up.png"></a></h2>
<div class="box"><strong>Creates an image of a 'pie slice' of a circle.</strong></div>

<h2><a name="_synopsis"></a>SYNOPSIS <a href="#_top"><img alt="^" border="0" src="../../../../up.png"></a></h2>
<div class="box"><strong>function mask = maskCircle( angleStart, angleSiz, r, nSamples ) </strong></div>

<h2><a name="_description"></a>DESCRIPTION <a href="#_top"><img alt="^" border="0" src="../../../../up.png"></a></h2>
<div class="fragment"><pre class="comment"> Creates an image of a 'pie slice' of a circle.

 Creates a 2D array of size (2rx2r) with values between 0 and 1.
 Specifically, mask has values 1 inside the pie slice of the circle
 defined by angleStart and angleSiz.  For example, using
 angleStart=-pi/4 and angleSiz=pi/2 would give a quarter circle facing
 right.  nsample conrols the accuracty of the circle at its boundaries.
 That is if nSamples&gt;1, pixels at the boundary which will have fractions
 values (when a pixel should be say half inside the circle and half
 outside of the circle).  Note that running time is
 O(nSamples^2*radius^2), so don't use a value that is too high for either.
 A series of masks whose angles together go from 0-2pi will sum exactly to
 form a radius r circle. r may be either an integer, or an integer + .5. A
 pixel is considered to belong to the circle iff it is within the given
 angle and has a value strictly smaller then r.
 
 USAGE
  mask = maskCircle( angleStart, angleSiz, r, [nSamples] )

 INPUTS
  angleStart   - start position of circle
  angleSiz     - number of radians to continue circle for
  r            - mask radius (integer or integer+.5)
  nSamples     - [1] controls sampling accuracy

 OUTPUTS
  mask         - the created image, size 2r by 2r

 EXAMPLE
  mask1 = maskCircle( -pi/8, pi/4, 20, 20 ); figure(1); im(mask1); 
  mask2 = maskCircle( pi/8, pi/8, 20, 20 );  figure(2); im(mask2); 
  figure(3); im(mask1+mask2);

 See also <a href="maskEllipse.html" class="code" title="function mask = maskEllipse( mRows, nCols, varargin )">MASKELLIPSE</a>, <a href="maskSphere.html" class="code" title="function mask = maskSphere( d, r, show )">MASKSPHERE</a>

 Piotr's Computer Vision Matlab Toolbox      Version 2.0
 Copyright 2014 Piotr Dollar.  [pdollar-at-gmail.com]
 Licensed under the Simplified BSD License [see external/bsd.txt]</pre></div>

<!-- crossreference -->
<h2><a name="_cross"></a>CROSS-REFERENCE INFORMATION <a href="#_top"><img alt="^" border="0" src="../../../../up.png"></a></h2>
This function calls:
<ul style="list-style-image:url(../../../../matlabicon.gif)">
<li><a href="localSum.html" class="code" title="function I = localSum( I, dims, shape, op )">localSum</a>	Fast routine for box, max and min filtering.</li></ul>
This function is called by:
<ul style="list-style-image:url(../../../../matlabicon.gif)">
</ul>
<!-- crossreference -->



<h2><a name="_source"></a>SOURCE CODE <a href="#_top"><img alt="^" border="0" src="../../../../up.png"></a></h2>
<div class="fragment"><pre>0001 <a name="_sub0" href="#_subfunctions" class="code">function mask = maskCircle( angleStart, angleSiz, r, nSamples )</a>
0002 <span class="comment">% Creates an image of a 'pie slice' of a circle.</span>
0003 <span class="comment">%</span>
0004 <span class="comment">% Creates a 2D array of size (2rx2r) with values between 0 and 1.</span>
0005 <span class="comment">% Specifically, mask has values 1 inside the pie slice of the circle</span>
0006 <span class="comment">% defined by angleStart and angleSiz.  For example, using</span>
0007 <span class="comment">% angleStart=-pi/4 and angleSiz=pi/2 would give a quarter circle facing</span>
0008 <span class="comment">% right.  nsample conrols the accuracty of the circle at its boundaries.</span>
0009 <span class="comment">% That is if nSamples&gt;1, pixels at the boundary which will have fractions</span>
0010 <span class="comment">% values (when a pixel should be say half inside the circle and half</span>
0011 <span class="comment">% outside of the circle).  Note that running time is</span>
0012 <span class="comment">% O(nSamples^2*radius^2), so don't use a value that is too high for either.</span>
0013 <span class="comment">% A series of masks whose angles together go from 0-2pi will sum exactly to</span>
0014 <span class="comment">% form a radius r circle. r may be either an integer, or an integer + .5. A</span>
0015 <span class="comment">% pixel is considered to belong to the circle iff it is within the given</span>
0016 <span class="comment">% angle and has a value strictly smaller then r.</span>
0017 <span class="comment">%</span>
0018 <span class="comment">% USAGE</span>
0019 <span class="comment">%  mask = maskCircle( angleStart, angleSiz, r, [nSamples] )</span>
0020 <span class="comment">%</span>
0021 <span class="comment">% INPUTS</span>
0022 <span class="comment">%  angleStart   - start position of circle</span>
0023 <span class="comment">%  angleSiz     - number of radians to continue circle for</span>
0024 <span class="comment">%  r            - mask radius (integer or integer+.5)</span>
0025 <span class="comment">%  nSamples     - [1] controls sampling accuracy</span>
0026 <span class="comment">%</span>
0027 <span class="comment">% OUTPUTS</span>
0028 <span class="comment">%  mask         - the created image, size 2r by 2r</span>
0029 <span class="comment">%</span>
0030 <span class="comment">% EXAMPLE</span>
0031 <span class="comment">%  mask1 = maskCircle( -pi/8, pi/4, 20, 20 ); figure(1); im(mask1);</span>
0032 <span class="comment">%  mask2 = maskCircle( pi/8, pi/8, 20, 20 );  figure(2); im(mask2);</span>
0033 <span class="comment">%  figure(3); im(mask1+mask2);</span>
0034 <span class="comment">%</span>
0035 <span class="comment">% See also MASKELLIPSE, MASKSPHERE</span>
0036 <span class="comment">%</span>
0037 <span class="comment">% Piotr's Computer Vision Matlab Toolbox      Version 2.0</span>
0038 <span class="comment">% Copyright 2014 Piotr Dollar.  [pdollar-at-gmail.com]</span>
0039 <span class="comment">% Licensed under the Simplified BSD License [see external/bsd.txt]</span>
0040 
0041 <span class="keyword">if</span>( nargin&lt;4 || isempty(nSamples) ); nSamples = 1; <span class="keyword">end</span>
0042 
0043 <span class="comment">% create circle</span>
0044 sampling = -(r-.5/nSamples):1/nSamples:(r-.5/nSamples);
0045 mask = zeros(nSamples*r*2);     
0046 [x,y] = meshgrid(sampling, -sampling);
0047 mask( x.^2+y.^2&lt;r^2 ) = 1;
0048 
0049 <span class="comment">% keep only values at appropriate angles</span>
0050 angles = atan2(y,x); angles(angles&lt;0)=angles(angles&lt;0)+2*pi;
0051 angleEnd = mod( angleStart + angleSiz, 2*pi );
0052 angleStart = mod( angleStart, 2*pi );
0053 <span class="keyword">if</span> (angleStart&lt;angleEnd)
0054   mask( angles&lt;angleStart | angles&gt;=angleEnd ) = 0;
0055 <span class="keyword">else</span>
0056   mask( angles&gt;=angleEnd &amp; angles&lt;angleStart ) = 0;
0057 <span class="keyword">end</span>
0058 
0059 <span class="comment">% shrink by counting samples per 'image' pixel</span>
0060 <span class="keyword">if</span> (nSamples&gt;1)
0061   mask = <a href="localSum.html" class="code" title="function I = localSum( I, dims, shape, op )">localSum</a>( mask, nSamples, <span class="string">'valid'</span> );
0062   sampling= 1:nSamples:nSamples*r*2; 
0063   mask = mask(sampling,sampling) / nSamples^2;
0064 <span class="keyword">end</span></pre></div>
<hr><address>Generated on Thu 05-May-2022 15:20:21 by <strong><a href="http://www.artefact.tk/software/matlab/m2html/" title="Matlab Documentation in HTML">m2html</a></strong> &copy; 2005</address>
</body>
</html>