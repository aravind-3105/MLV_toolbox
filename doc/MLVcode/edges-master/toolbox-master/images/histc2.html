<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
                "http://www.w3.org/TR/REC-html40/loose.dtd">
<html>
<head>
  <title>Description of histc2</title>
  <meta name="keywords" content="histc2">
  <meta name="description" content="Multidimensional histogram count with weighted values.">
  <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
  <meta name="generator" content="m2html v1.5 &copy; 2003-2005 Guillaume Flandin">
  <meta name="robots" content="index, follow">
  <link type="text/css" rel="stylesheet" href="../../../../m2html.css">
</head>
<body>
<a name="_top"></a>
<div><a href="../../../../index.html">Home</a> &gt;  <a href="../../../index.html">MLVcode</a> &gt; <a href="../../index.html">edges-master</a> &gt; <a href="#">toolbox-master</a> &gt; <a href="index.html">images</a> &gt; histc2.m</div>

<!--<table width="100%"><tr><td align="left"><a href="../../../../index.html"><img alt="<" border="0" src="../../../../left.png">&nbsp;Master index</a></td>
<td align="right"><a href="index.html">Index for MLVcode\edges-master\toolbox-master\images&nbsp;<img alt=">" border="0" src="../../../../right.png"></a></td></tr></table>-->

<h1>histc2
</h1>

<h2><a name="_name"></a>PURPOSE <a href="#_top"><img alt="^" border="0" src="../../../../up.png"></a></h2>
<div class="box"><strong>Multidimensional histogram count with weighted values.</strong></div>

<h2><a name="_synopsis"></a>SYNOPSIS <a href="#_top"><img alt="^" border="0" src="../../../../up.png"></a></h2>
<div class="box"><strong>function h = histc2( A, edges, wtMask ) </strong></div>

<h2><a name="_description"></a>DESCRIPTION <a href="#_top"><img alt="^" border="0" src="../../../../up.png"></a></h2>
<div class="fragment"><pre class="comment"> Multidimensional histogram count with weighted values.

 Creates a histogram h of the values in A [n x nd], with edges as
 specified. If nd==1, that is when A is a vector, the resulting histogram
 h is a vector of length nBins, where nBins=length(edges)-1. h(q) contains
 the weighted count of values v in A such that edges(q) &lt;= v &lt; edges(q+1).
 h(nBins) additionally contains the weighted count of values in A such
 that v==edges(nBins+1) -- which is different then how histc treates the
 boundary condition. Finally, h is normalized so that sum(h(:))==1.

 It usually makes sense to specify edges explicitly, especially if
 different histograms are going to be compared.  In general, edges must
 have monotonically non-decreasing values.  Also, if the exact bounds are
 unknown then it is convenient to set the first element in edges to -inf
 and the last to inf.  If h = histc2( A, nBins, ...), edges are
 automatically generated and have bins equally spaced between min(A) and
 max(A). That is the edges vector is generated by:
  edges = linspace( min(A)-eps, max(A)+eps, nBins+1 );

 If nd&gt;1, that is when A is a 2d matrix instead of a vector, the created
 histogram is multi-dimensional with dimensions nBins^nd, where each bin
 h(q1,...,qnd) contains the the weighted count of vectors v in A such that
 edges{k}(qk) &lt;= v(k) &lt; edges{k}(qk+1), for k=1,...,nd.  Note that if nd&gt;1
 edges may be a cell vector where each element is a vector of edges or a
 scalar nBins as before.

 Each value in A may optionally have an associated weight given by wtMask,
 which should have the same number of elements as A. If not specified, the
 default is wtMask=ones(n,1).

 USAGE
  h = histc2( A, edges, [wtMask] )

 INPUTS
  A           - [n x nd] 2D numeric array
  edges       - quantization bounds, see above
  wtMask      - [] length [n] vector of weights

 OUTPUTS
  h           - nd histogram [nBins^nd]

 EXAMPLE - 1D histograms
  A=filterGauss([1000 1000],[],[],0); A=A(:); n=length(A);
  h1 = histc2( A, 25 );              figure(1); bar(h1);
  h2 = histc2( A, 25, ones(n,1) );   figure(2); bar(h2);
  h3 = histc2( A, 25, A );           figure(3); bar(h3);

 EXAMPLE - 2D histograms
  A=filterGauss([1000 1000],[],[],0); A=A(:); n=length(A);
  h=histc2( [A A], 25 );    figure(1); im(h);  % decreasing along diag
  h=histc2( [A A], 25, A ); figure(2); im(h);  % constant along diag

 See also HISTC, <a href="assignToBins.html" class="code" title="function B = assignToBins( A, edges )">ASSIGNTOBINS</a>, BAR

 Piotr's Computer Vision Matlab Toolbox      Version 2.0
 Copyright 2014 Piotr Dollar.  [pdollar-at-gmail.com]
 Licensed under the Simplified BSD License [see external/bsd.txt]</pre></div>

<!-- crossreference -->
<h2><a name="_cross"></a>CROSS-REFERENCE INFORMATION <a href="#_top"><img alt="^" border="0" src="../../../../up.png"></a></h2>
This function calls:
<ul style="list-style-image:url(../../../../matlabicon.gif)">
</ul>
This function is called by:
<ul style="list-style-image:url(../../../../matlabicon.gif)">
<li><a href="histcImLoc.html" class="code" title="function h = histcImLoc( I, edges, parMask, wtMask, multCh )">histcImLoc</a>	Creates a series of locally position dependent histograms.</li></ul>
<!-- crossreference -->



<h2><a name="_source"></a>SOURCE CODE <a href="#_top"><img alt="^" border="0" src="../../../../up.png"></a></h2>
<div class="fragment"><pre>0001 <a name="_sub0" href="#_subfunctions" class="code">function h = histc2( A, edges, wtMask )</a>
0002 <span class="comment">% Multidimensional histogram count with weighted values.</span>
0003 <span class="comment">%</span>
0004 <span class="comment">% Creates a histogram h of the values in A [n x nd], with edges as</span>
0005 <span class="comment">% specified. If nd==1, that is when A is a vector, the resulting histogram</span>
0006 <span class="comment">% h is a vector of length nBins, where nBins=length(edges)-1. h(q) contains</span>
0007 <span class="comment">% the weighted count of values v in A such that edges(q) &lt;= v &lt; edges(q+1).</span>
0008 <span class="comment">% h(nBins) additionally contains the weighted count of values in A such</span>
0009 <span class="comment">% that v==edges(nBins+1) -- which is different then how histc treates the</span>
0010 <span class="comment">% boundary condition. Finally, h is normalized so that sum(h(:))==1.</span>
0011 <span class="comment">%</span>
0012 <span class="comment">% It usually makes sense to specify edges explicitly, especially if</span>
0013 <span class="comment">% different histograms are going to be compared.  In general, edges must</span>
0014 <span class="comment">% have monotonically non-decreasing values.  Also, if the exact bounds are</span>
0015 <span class="comment">% unknown then it is convenient to set the first element in edges to -inf</span>
0016 <span class="comment">% and the last to inf.  If h = histc2( A, nBins, ...), edges are</span>
0017 <span class="comment">% automatically generated and have bins equally spaced between min(A) and</span>
0018 <span class="comment">% max(A). That is the edges vector is generated by:</span>
0019 <span class="comment">%  edges = linspace( min(A)-eps, max(A)+eps, nBins+1 );</span>
0020 <span class="comment">%</span>
0021 <span class="comment">% If nd&gt;1, that is when A is a 2d matrix instead of a vector, the created</span>
0022 <span class="comment">% histogram is multi-dimensional with dimensions nBins^nd, where each bin</span>
0023 <span class="comment">% h(q1,...,qnd) contains the the weighted count of vectors v in A such that</span>
0024 <span class="comment">% edges{k}(qk) &lt;= v(k) &lt; edges{k}(qk+1), for k=1,...,nd.  Note that if nd&gt;1</span>
0025 <span class="comment">% edges may be a cell vector where each element is a vector of edges or a</span>
0026 <span class="comment">% scalar nBins as before.</span>
0027 <span class="comment">%</span>
0028 <span class="comment">% Each value in A may optionally have an associated weight given by wtMask,</span>
0029 <span class="comment">% which should have the same number of elements as A. If not specified, the</span>
0030 <span class="comment">% default is wtMask=ones(n,1).</span>
0031 <span class="comment">%</span>
0032 <span class="comment">% USAGE</span>
0033 <span class="comment">%  h = histc2( A, edges, [wtMask] )</span>
0034 <span class="comment">%</span>
0035 <span class="comment">% INPUTS</span>
0036 <span class="comment">%  A           - [n x nd] 2D numeric array</span>
0037 <span class="comment">%  edges       - quantization bounds, see above</span>
0038 <span class="comment">%  wtMask      - [] length [n] vector of weights</span>
0039 <span class="comment">%</span>
0040 <span class="comment">% OUTPUTS</span>
0041 <span class="comment">%  h           - nd histogram [nBins^nd]</span>
0042 <span class="comment">%</span>
0043 <span class="comment">% EXAMPLE - 1D histograms</span>
0044 <span class="comment">%  A=filterGauss([1000 1000],[],[],0); A=A(:); n=length(A);</span>
0045 <span class="comment">%  h1 = histc2( A, 25 );              figure(1); bar(h1);</span>
0046 <span class="comment">%  h2 = histc2( A, 25, ones(n,1) );   figure(2); bar(h2);</span>
0047 <span class="comment">%  h3 = histc2( A, 25, A );           figure(3); bar(h3);</span>
0048 <span class="comment">%</span>
0049 <span class="comment">% EXAMPLE - 2D histograms</span>
0050 <span class="comment">%  A=filterGauss([1000 1000],[],[],0); A=A(:); n=length(A);</span>
0051 <span class="comment">%  h=histc2( [A A], 25 );    figure(1); im(h);  % decreasing along diag</span>
0052 <span class="comment">%  h=histc2( [A A], 25, A ); figure(2); im(h);  % constant along diag</span>
0053 <span class="comment">%</span>
0054 <span class="comment">% See also HISTC, ASSIGNTOBINS, BAR</span>
0055 <span class="comment">%</span>
0056 <span class="comment">% Piotr's Computer Vision Matlab Toolbox      Version 2.0</span>
0057 <span class="comment">% Copyright 2014 Piotr Dollar.  [pdollar-at-gmail.com]</span>
0058 <span class="comment">% Licensed under the Simplified BSD License [see external/bsd.txt]</span>
0059 
0060 <span class="keyword">if</span>( nargin&lt;3 ); wtMask=[]; <span class="keyword">end</span>;
0061 <span class="keyword">if</span>( ~isa(A,<span class="string">'double'</span>) ); A=double(A); <span class="keyword">end</span>;
0062 <span class="keyword">if</span>( ~ismatrix(A) ); error(<span class="string">'A must be a 2 dim array'</span>); <span class="keyword">end</span>;
0063 [n,nd] = size(A);
0064 <span class="keyword">if</span>( ~isempty(wtMask) &amp;&amp; n~=numel(wtMask) )
0065   error( <span class="string">'wtMask must have n elements (A is nxnd)'</span> ); <span class="keyword">end</span>
0066 
0067 <span class="keyword">if</span>( nd==1 )
0068   <span class="comment">% if nBins given instead of edges calculate edges</span>
0069   <span class="keyword">if</span>(length(edges)==1)
0070     edges = linspace(min(A)-eps,max(A)+eps,edges+1);
0071   <span class="keyword">end</span>
0072 
0073   <span class="comment">% create 1d histogram</span>
0074   <span class="keyword">if</span>(isempty(wtMask))
0075     h = histc( A, edges );
0076     h(end-1) = h(end-1)+h(end);
0077     h = h(1:end-1); h = h / sum(h);
0078   <span class="keyword">else</span>
0079     h = histc2c( A, wtMask, edges );
0080     h = h / sum(h);
0081   <span class="keyword">end</span>
0082 
0083 <span class="keyword">else</span>
0084   <span class="comment">% if nBins given instead of edges calculate edges per dimension</span>
0085   <span class="keyword">if</span>( ~iscell(edges ) )
0086     edges=repmat({edges},[1 nd]);
0087   <span class="keyword">elseif</span>( length(edges)~=nd )
0088     error( <span class="string">'Illegal dimensions for edges'</span> );
0089   <span class="keyword">end</span>
0090   <span class="keyword">for</span> i=1:length( edges );
0091     <span class="keyword">if</span>(length(edges{i})==1)
0092       edges{i}=linspace(min(A(:,i))-eps,max(A(:,i))+eps,edges{i}+1);
0093     <span class="keyword">end</span>
0094   <span class="keyword">end</span>
0095 
0096   <span class="comment">% create multidimensional histogram</span>
0097   <span class="keyword">if</span>( isempty(wtMask) ); wtMask=ones(1,n); <span class="keyword">end</span>;
0098   h = histc2c( A, wtMask, edges{:} );
0099   h = h / sum(h(:));
0100 <span class="keyword">end</span>
0101</pre></div>
<hr><address>Generated on Thu 05-May-2022 15:20:21 by <strong><a href="http://www.artefact.tk/software/matlab/m2html/" title="Matlab Documentation in HTML">m2html</a></strong> &copy; 2005</address>
</body>
</html>