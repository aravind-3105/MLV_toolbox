<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
                "http://www.w3.org/TR/REC-html40/loose.dtd">
<html>
<head>
  <title>Description of nonMaxSuprWin</title>
  <meta name="keywords" content="nonMaxSuprWin">
  <meta name="description" content="Nonmaximal suppression of values outside of a given window.">
  <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
  <meta name="generator" content="m2html v1.5 &copy; 2003-2005 Guillaume Flandin">
  <meta name="robots" content="index, follow">
  <link type="text/css" rel="stylesheet" href="../../../../m2html.css">
</head>
<body>
<a name="_top"></a>
<div><a href="../../../../index.html">Home</a> &gt;  <a href="../../../index.html">MLVcode</a> &gt; <a href="../../index.html">edges-master</a> &gt; <a href="#">toolbox-master</a> &gt; <a href="index.html">images</a> &gt; nonMaxSuprWin.m</div>

<!--<table width="100%"><tr><td align="left"><a href="../../../../index.html"><img alt="<" border="0" src="../../../../left.png">&nbsp;Master index</a></td>
<td align="right"><a href="index.html">Index for MLVcode\edges-master\toolbox-master\images&nbsp;<img alt=">" border="0" src="../../../../right.png"></a></td></tr></table>-->

<h1>nonMaxSuprWin
</h1>

<h2><a name="_name"></a>PURPOSE <a href="#_top"><img alt="^" border="0" src="../../../../up.png"></a></h2>
<div class="box"><strong>Nonmaximal suppression of values outside of a given window.</strong></div>

<h2><a name="_synopsis"></a>SYNOPSIS <a href="#_top"><img alt="^" border="0" src="../../../../up.png"></a></h2>
<div class="box"><strong>function [subs,vals,keepLocs] = nonMaxSuprWin( subs, vals,strLocs, endLocs, thresh, maxn ) </strong></div>

<h2><a name="_description"></a>DESCRIPTION <a href="#_top"><img alt="^" border="0" src="../../../../up.png"></a></h2>
<div class="fragment"><pre class="comment"> Nonmaximal suppression of values outside of a given window.

 Suppresses all location in subs that do not fall in given range (defined
 by strLocs and endLocs).  For example, if subs are 3D coordinates of
 maxes over an array of size siz,  &quot;nonMaxSuprWin( subs, vals,
 [1,1,1]+10, siz-10 )&quot; suppreses all locations within 10 pixels of the
 border of I.

 USAGE
  [subs,vals,keepLocs] = nonMaxSuprWin( subs, vals, ...
                                      strLocs, endLocs, thresh, maxn )

 INPUTS
  subs        - subscripts of point locations (m x d)
  vals        - values at point locations (m x 1)
  strLocs     - locations at which to start cropping along each dim
  endLocs     - locations at which to end cropping along each dim
  thresh      - [] minimum value below which not to look fo
  maxn        - [] return at most maxn of the largest vals

 OUTPUTS
  subs        - subscripts of non-suppressed point locations (n x d)
  vals        - values at non-suppressed point locations (n x 1)
  keepLocs    - indicies of kept locations from subs (n x 1)

 EXAMPLE

 See also SUBSTOARRAY, <a href="nonMaxSupr.html" class="code" title="function [subs,vals] = nonMaxSupr( I, radii, thresh, maxn )">NONMAXSUPR</a>, <a href="nonMaxSuprList.html" class="code" title="function [subs,vals,keep] = nonMaxSuprList( subs, vals, radii,thresh, maxn, flag)">NONMAXSUPRLIST</a>

 Piotr's Computer Vision Matlab Toolbox      Version 2.0
 Copyright 2014 Piotr Dollar.  [pdollar-at-gmail.com]
 Licensed under the Simplified BSD License [see external/bsd.txt]</pre></div>

<!-- crossreference -->
<h2><a name="_cross"></a>CROSS-REFERENCE INFORMATION <a href="#_top"><img alt="^" border="0" src="../../../../up.png"></a></h2>
This function calls:
<ul style="list-style-image:url(../../../../matlabicon.gif)">
</ul>
This function is called by:
<ul style="list-style-image:url(../../../../matlabicon.gif)">
</ul>
<!-- crossreference -->



<h2><a name="_source"></a>SOURCE CODE <a href="#_top"><img alt="^" border="0" src="../../../../up.png"></a></h2>
<div class="fragment"><pre>0001 <a name="_sub0" href="#_subfunctions" class="code">function [subs,vals,keepLocs] = nonMaxSuprWin( subs, vals, </a><span class="keyword">...</span>
0002   strLocs, endLocs, thresh, maxn )
0003 <span class="comment">% Nonmaximal suppression of values outside of a given window.</span>
0004 <span class="comment">%</span>
0005 <span class="comment">% Suppresses all location in subs that do not fall in given range (defined</span>
0006 <span class="comment">% by strLocs and endLocs).  For example, if subs are 3D coordinates of</span>
0007 <span class="comment">% maxes over an array of size siz,  &quot;nonMaxSuprWin( subs, vals,</span>
0008 <span class="comment">% [1,1,1]+10, siz-10 )&quot; suppreses all locations within 10 pixels of the</span>
0009 <span class="comment">% border of I.</span>
0010 <span class="comment">%</span>
0011 <span class="comment">% USAGE</span>
0012 <span class="comment">%  [subs,vals,keepLocs] = nonMaxSuprWin( subs, vals, ...</span>
0013 <span class="comment">%                                      strLocs, endLocs, thresh, maxn )</span>
0014 <span class="comment">%</span>
0015 <span class="comment">% INPUTS</span>
0016 <span class="comment">%  subs        - subscripts of point locations (m x d)</span>
0017 <span class="comment">%  vals        - values at point locations (m x 1)</span>
0018 <span class="comment">%  strLocs     - locations at which to start cropping along each dim</span>
0019 <span class="comment">%  endLocs     - locations at which to end cropping along each dim</span>
0020 <span class="comment">%  thresh      - [] minimum value below which not to look fo</span>
0021 <span class="comment">%  maxn        - [] return at most maxn of the largest vals</span>
0022 <span class="comment">%</span>
0023 <span class="comment">% OUTPUTS</span>
0024 <span class="comment">%  subs        - subscripts of non-suppressed point locations (n x d)</span>
0025 <span class="comment">%  vals        - values at non-suppressed point locations (n x 1)</span>
0026 <span class="comment">%  keepLocs    - indicies of kept locations from subs (n x 1)</span>
0027 <span class="comment">%</span>
0028 <span class="comment">% EXAMPLE</span>
0029 <span class="comment">%</span>
0030 <span class="comment">% See also SUBSTOARRAY, NONMAXSUPR, NONMAXSUPRLIST</span>
0031 <span class="comment">%</span>
0032 <span class="comment">% Piotr's Computer Vision Matlab Toolbox      Version 2.0</span>
0033 <span class="comment">% Copyright 2014 Piotr Dollar.  [pdollar-at-gmail.com]</span>
0034 <span class="comment">% Licensed under the Simplified BSD License [see external/bsd.txt]</span>
0035 
0036 vals = vals(:);  nvals = length(vals);  nd=size(subs,2);
0037 <span class="keyword">if</span>( nargin&lt;5 || isempty(thresh)); thresh=[]; <span class="keyword">end</span>
0038 <span class="keyword">if</span>( nargin&lt;6 || isempty(maxn)); maxn = []; <span class="keyword">end</span>
0039 
0040 [strLocs,er] = checkNumArgs( strLocs, [1 nd], 0, 0 ); error(er);
0041 [endLocs,er] = checkNumArgs( endLocs, [1 nd], 0, 0 ); error(er);
0042 <span class="keyword">if</span> (any(strLocs&gt;endLocs)); error(<span class="string">'strLocs must be &lt;= endLocs'</span>); <span class="keyword">end</span>
0043 
0044 <span class="comment">% discard vals below thresh</span>
0045 <span class="keyword">if</span> (~isempty(thresh))
0046   keepLocs = vals &gt; thresh;
0047 <span class="keyword">else</span>
0048   keepLocs = true( nvals, 1 );
0049 <span class="keyword">end</span>
0050 
0051 <span class="comment">% suppress all values outside of window defined by start and end locs</span>
0052 <span class="keyword">for</span> d=1:nd
0053   <span class="keyword">if</span> (strLocs(d)&gt;0)
0054     keepLocsi = (subs(:,d)&gt;=strLocs(d)) &amp; (subs(:,d)&lt;=endLocs(d));
0055     keepLocs = keepLocs &amp; keepLocsi;
0056   <span class="keyword">end</span>
0057 <span class="keyword">end</span>
0058 
0059 <span class="comment">% suppress all but the first maxn nonzero elts in keepLocs</span>
0060 <span class="keyword">if</span>( ~isempty(maxn) &amp;&amp; maxn&gt;0 &amp;&amp; maxn&lt;sum(keepLocs) )
0061   [~,order] = sort( -vals ); [~,unorder]=sort(order);
0062   keepLocs = keepLocs(order);
0063   keepLocs( cumsum( keepLocs )&gt;maxn ) = 0;
0064   keepLocs = keepLocs(unorder);
0065 <span class="keyword">end</span>
0066 
0067 <span class="comment">% discard locations where keepLocs==0</span>
0068 vals = vals( keepLocs ); subs = subs( keepLocs, : );</pre></div>
<hr><address>Generated on Thu 05-May-2022 14:52:24 by <strong><a href="http://www.artefact.tk/software/matlab/m2html/" title="Matlab Documentation in HTML">m2html</a></strong> &copy; 2005</address>
</body>
</html>