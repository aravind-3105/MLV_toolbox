<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
                "http://www.w3.org/TR/REC-html40/loose.dtd">
<html>
<head>
  <title>Description of meanShiftImExplore</title>
  <meta name="keywords" content="meanShiftImExplore">
  <meta name="description" content="Visualization to help choose sigmas for meanShiftIm.">
  <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
  <meta name="generator" content="m2html v1.5 &copy; 2003-2005 Guillaume Flandin">
  <meta name="robots" content="index, follow">
  <link type="text/css" rel="stylesheet" href="../../../../m2html.css">
</head>
<body>
<a name="_top"></a>
<div><a href="../../../../index.html">Home</a> &gt;  <a href="../../../index.html">MLVcode</a> &gt; <a href="../../index.html">edges-master</a> &gt; <a href="#">toolbox-master</a> &gt; <a href="index.html">classify</a> &gt; meanShiftImExplore.m</div>

<!--<table width="100%"><tr><td align="left"><a href="../../../../index.html"><img alt="<" border="0" src="../../../../left.png">&nbsp;Master index</a></td>
<td align="right"><a href="index.html">Index for MLVcode\edges-master\toolbox-master\classify&nbsp;<img alt=">" border="0" src="../../../../right.png"></a></td></tr></table>-->

<h1>meanShiftImExplore
</h1>

<h2><a name="_name"></a>PURPOSE <a href="#_top"><img alt="^" border="0" src="../../../../up.png"></a></h2>
<div class="box"><strong>Visualization to help choose sigmas for meanShiftIm.</strong></div>

<h2><a name="_synopsis"></a>SYNOPSIS <a href="#_top"><img alt="^" border="0" src="../../../../up.png"></a></h2>
<div class="box"><strong>function meanShiftImExplore( I, X, sigSpt, sigRng, show ) </strong></div>

<h2><a name="_description"></a>DESCRIPTION <a href="#_top"><img alt="^" border="0" src="../../../../up.png"></a></h2>
<div class="fragment"><pre class="comment"> Visualization to help choose sigmas for meanShiftIm.

 Displays the original image I, and prompts user to select a point on the
 image.  For given point, calculates the distance (both spatial and range)
 to every other point in the image.   It shows the results in a number of
 panes, which include 1) the original image I, 2) Srange - similarity
 based on range only, 3) Seuc - similarity based on Euclidean distance
 only, and 4) overall similarity.  Finally, in each image the green dot
 (possibly occluded) shows the original point, and the blue dot shows the
 new mean of the window after 1 step of meanShift.

 USAGE
  meanShiftImExplore( I, X, sigSpt, sigRng, [show] )

 INPUTS
  I       - MxN image for display
  X       - MxNxP data array, P may be 1 (X may be same as I)
  sigSpt  - integer specifying spatial standard deviation
  sigRng  - value specifying the standard deviation of the range data
  show    - [1] will display results in figure(show)

 OUTPUTS

 EXAMPLE
  I=double(imread('cameraman.tif'))/255;
  meanShiftImExplore( I, I, 5, .2, 1 );

 See also <a href="meanShiftIm.html" class="code" title="function [M,Vr,Vc] = meanShiftIm( X,sigSpt,sigRng,softFlag,maxIter,minDel )">MEANSHIFTIM</a>

 Piotr's Computer Vision Matlab Toolbox      Version 2.0
 Copyright 2014 Piotr Dollar.  [pdollar-at-gmail.com]
 Licensed under the Simplified BSD License [see external/bsd.txt]</pre></div>

<!-- crossreference -->
<h2><a name="_cross"></a>CROSS-REFERENCE INFORMATION <a href="#_top"><img alt="^" border="0" src="../../../../up.png"></a></h2>
This function calls:
<ul style="list-style-image:url(../../../../matlabicon.gif)">
<li><a href="pdist2.html" class="code" title="function D = pdist2( X, Y, metric )">pdist2</a>	Calculates the distance between sets of vectors.</li></ul>
This function is called by:
<ul style="list-style-image:url(../../../../matlabicon.gif)">
</ul>
<!-- crossreference -->



<h2><a name="_source"></a>SOURCE CODE <a href="#_top"><img alt="^" border="0" src="../../../../up.png"></a></h2>
<div class="fragment"><pre>0001 <a name="_sub0" href="#_subfunctions" class="code">function meanShiftImExplore( I, X, sigSpt, sigRng, show )</a>
0002 <span class="comment">% Visualization to help choose sigmas for meanShiftIm.</span>
0003 <span class="comment">%</span>
0004 <span class="comment">% Displays the original image I, and prompts user to select a point on the</span>
0005 <span class="comment">% image.  For given point, calculates the distance (both spatial and range)</span>
0006 <span class="comment">% to every other point in the image.   It shows the results in a number of</span>
0007 <span class="comment">% panes, which include 1) the original image I, 2) Srange - similarity</span>
0008 <span class="comment">% based on range only, 3) Seuc - similarity based on Euclidean distance</span>
0009 <span class="comment">% only, and 4) overall similarity.  Finally, in each image the green dot</span>
0010 <span class="comment">% (possibly occluded) shows the original point, and the blue dot shows the</span>
0011 <span class="comment">% new mean of the window after 1 step of meanShift.</span>
0012 <span class="comment">%</span>
0013 <span class="comment">% USAGE</span>
0014 <span class="comment">%  meanShiftImExplore( I, X, sigSpt, sigRng, [show] )</span>
0015 <span class="comment">%</span>
0016 <span class="comment">% INPUTS</span>
0017 <span class="comment">%  I       - MxN image for display</span>
0018 <span class="comment">%  X       - MxNxP data array, P may be 1 (X may be same as I)</span>
0019 <span class="comment">%  sigSpt  - integer specifying spatial standard deviation</span>
0020 <span class="comment">%  sigRng  - value specifying the standard deviation of the range data</span>
0021 <span class="comment">%  show    - [1] will display results in figure(show)</span>
0022 <span class="comment">%</span>
0023 <span class="comment">% OUTPUTS</span>
0024 <span class="comment">%</span>
0025 <span class="comment">% EXAMPLE</span>
0026 <span class="comment">%  I=double(imread('cameraman.tif'))/255;</span>
0027 <span class="comment">%  meanShiftImExplore( I, I, 5, .2, 1 );</span>
0028 <span class="comment">%</span>
0029 <span class="comment">% See also MEANSHIFTIM</span>
0030 <span class="comment">%</span>
0031 <span class="comment">% Piotr's Computer Vision Matlab Toolbox      Version 2.0</span>
0032 <span class="comment">% Copyright 2014 Piotr Dollar.  [pdollar-at-gmail.com]</span>
0033 <span class="comment">% Licensed under the Simplified BSD License [see external/bsd.txt]</span>
0034 
0035 <span class="keyword">if</span>( nargin&lt;5 ); show = 1; <span class="keyword">end</span>
0036 [mrows, ncols, p] = size(X);
0037 
0038 <span class="comment">%%% get input point</span>
0039 figure(show); clf; im(I);
0040 [c,r] = ginput(1);
0041 r=round(r); c=round(c);
0042 
0043 <span class="comment">%%% get D and S</span>
0044 [gridRs, gridCs] = ndgrid( 1:mrows, 1:ncols );
0045 Deuc = ((gridRs-r).^2 + (gridCs-c).^2) / sigSpt^2;
0046 x = X(r,c,:); x = x(:)';  Xflat = reshape(X,[],p);
0047 Drange = <a href="pdist2.html" class="code" title="function D = pdist2( X, Y, metric )">pdist2</a>( x, Xflat );
0048 Drange = reshape( Drange, mrows, ncols ) / sigRng^2;
0049 D = Drange + Deuc;
0050 
0051 S = exp( -D );
0052 Srange = exp( -Drange );
0053 Seuc = exp( -Deuc );
0054 
0055 <span class="comment">%%% new c and r [stretched for display]</span>
0056 c2 = (gridCs .* S); c2 = sum( c2(:) ) / sum(S(:));
0057 r2 = (gridRs .* S); r2 = sum( r2(:) ) / sum(S(:));
0058 <span class="comment">%c2 = c+(c2-c)*2; r2 = r+(r2-r)*2;</span>
0059 
0060 <span class="comment">%%% show</span>
0061 figure(show); clf;
0062 subplot(2,2,1); im(I);
0063 hold(<span class="string">'on'</span>); plot( c, r, <span class="string">'.g'</span> ); plot( c2, r2, <span class="string">'.b'</span> ); hold(<span class="string">'off'</span>);
0064 subplot(2,2,2); im(Srange);
0065 hold(<span class="string">'on'</span>); plot( c, r, <span class="string">'.g'</span> ); plot( c2, r2, <span class="string">'.b'</span> ); hold(<span class="string">'off'</span>);
0066 subplot(2,2,3); im(Seuc);
0067 hold(<span class="string">'on'</span>); plot( c, r, <span class="string">'.g'</span> ); plot( c2, r2, <span class="string">'.b'</span> ); hold(<span class="string">'off'</span>);
0068 subplot(2,2,4); im(S);
0069 hold(<span class="string">'on'</span>); plot( c, r, <span class="string">'.g'</span> ); plot( c2, r2, <span class="string">'.b'</span> ); hold(<span class="string">'off'</span>);</pre></div>
<hr><address>Generated on Thu 05-May-2022 14:52:24 by <strong><a href="http://www.artefact.tk/software/matlab/m2html/" title="Matlab Documentation in HTML">m2html</a></strong> &copy; 2005</address>
</body>
</html>