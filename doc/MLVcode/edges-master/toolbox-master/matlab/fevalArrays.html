<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
                "http://www.w3.org/TR/REC-html40/loose.dtd">
<html>
<head>
  <title>Description of fevalArrays</title>
  <meta name="keywords" content="fevalArrays">
  <meta name="description" content="Used to apply the same operation to a stack of array elements.">
  <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
  <meta name="generator" content="m2html v1.5 &copy; 2003-2005 Guillaume Flandin">
  <meta name="robots" content="index, follow">
  <link type="text/css" rel="stylesheet" href="../../../../m2html.css">
</head>
<body>
<a name="_top"></a>
<div><a href="../../../../index.html">Home</a> &gt;  <a href="../../../index.html">MLVcode</a> &gt; <a href="../../index.html">edges-master</a> &gt; <a href="#">toolbox-master</a> &gt; <a href="index.html">matlab</a> &gt; fevalArrays.m</div>

<!--<table width="100%"><tr><td align="left"><a href="../../../../index.html"><img alt="<" border="0" src="../../../../left.png">&nbsp;Master index</a></td>
<td align="right"><a href="index.html">Index for MLVcode\edges-master\toolbox-master\matlab&nbsp;<img alt=">" border="0" src="../../../../right.png"></a></td></tr></table>-->

<h1>fevalArrays
</h1>

<h2><a name="_name"></a>PURPOSE <a href="#_top"><img alt="^" border="0" src="../../../../up.png"></a></h2>
<div class="box"><strong>Used to apply the same operation to a stack of array elements.</strong></div>

<h2><a name="_synopsis"></a>SYNOPSIS <a href="#_top"><img alt="^" border="0" src="../../../../up.png"></a></h2>
<div class="box"><strong>function B = fevalArrays( A, fHandle, varargin ) </strong></div>

<h2><a name="_description"></a>DESCRIPTION <a href="#_top"><img alt="^" border="0" src="../../../../up.png"></a></h2>
<div class="fragment"><pre class="comment"> Used to apply the same operation to a stack of array elements.

 The only constraint on the function specified in fHandle is that given
 two differrent input arrays a1 and a2, if a1 and a2 have the same
 dimensions then the outputs b1 and b2 must have the same dimensions. For
 long operations shows progress information.

 A can have arbitrary dimension.  Suppose A has size d1 x d2 ... x dn.
 Then for the purpose of this function A has dn elements, where
 A(:,:,...,i) is the ith element.  This function then applies the
 operation in fHandle, with paramters given in varargin, to each element
 in A. The results are returned in the array B, of size f1 x f2 x ... x fk
 x dn.  Each of the n element of B of the form B(:,:,...,i) is the the
 result of applying fHandle to A(:,:,...,i).  A may also be a cell array,
 see the last example.

 A limitation of fevalArrays is that it does not pass state information
 to fHandle.  For example, fHandle may want to know how many times it's
 been called.  This can be overcome by saving state information inside
 fHandle using 'persistent' variables.  For an example see imwrite2.

 USAGE
  B = fevalArrays( A, fHandle, varargin )

 INPUTS
  A        - input array
  fHandle  - operation to apply to each 'element' of A
  params   - [varargin] parameters for each operation specified by fHandle

 OUTPUTS
  B        - output array

 EXAMPLE
  B = fevalArrays( A, @rgb2gray );      % where A is MxNx3xR
  B = fevalArrays( A, @imresize, .5 );  % where A is MxNxR
  B = fevalArrays( A, @imNormalize );   % where A has arbitrary dims
  B = fevalArrays( A, @(x) {imresize(x{1},.5)} ); % A is cell array

 See also <a href="fevalImages.html" class="code" title="function X = fevalImages( fHandle, prms, srcDir, name, ext,nStr, nEnd, nDigits )">FEVALIMAGES</a>, <a href="fevalMats.html" class="code" title="function X = fevalMats( fHandle, matCont, prm, srcDir, prefix )">FEVALMATS</a>, ARRAYFUN
 IMWRITE2, PERSISTENT, <a href="ticStatus.html" class="code" title="function id = ticStatus( msg, updateFreq, updateMinT, erasePrev )">TICSTATUS</a>,

 Piotr's Computer Vision Matlab Toolbox      Version 2.0
 Copyright 2014 Piotr Dollar.  [pdollar-at-gmail.com]
 Licensed under the Simplified BSD License [see external/bsd.txt]</pre></div>

<!-- crossreference -->
<h2><a name="_cross"></a>CROSS-REFERENCE INFORMATION <a href="#_top"><img alt="^" border="0" src="../../../../up.png"></a></h2>
This function calls:
<ul style="list-style-image:url(../../../../matlabicon.gif)">
<li><a href="ticStatus.html" class="code" title="function id = ticStatus( msg, updateFreq, updateMinT, erasePrev )">ticStatus</a>	Used to display the progress of a long process.</li><li><a href="tocStatus.html" class="code" title="function tocStatus( id, fracDone )">tocStatus</a>	Used to display the progress of a long process.</li></ul>
This function is called by:
<ul style="list-style-image:url(../../../../matlabicon.gif)">
</ul>
<!-- crossreference -->



<h2><a name="_source"></a>SOURCE CODE <a href="#_top"><img alt="^" border="0" src="../../../../up.png"></a></h2>
<div class="fragment"><pre>0001 <a name="_sub0" href="#_subfunctions" class="code">function B = fevalArrays( A, fHandle, varargin )</a>
0002 <span class="comment">% Used to apply the same operation to a stack of array elements.</span>
0003 <span class="comment">%</span>
0004 <span class="comment">% The only constraint on the function specified in fHandle is that given</span>
0005 <span class="comment">% two differrent input arrays a1 and a2, if a1 and a2 have the same</span>
0006 <span class="comment">% dimensions then the outputs b1 and b2 must have the same dimensions. For</span>
0007 <span class="comment">% long operations shows progress information.</span>
0008 <span class="comment">%</span>
0009 <span class="comment">% A can have arbitrary dimension.  Suppose A has size d1 x d2 ... x dn.</span>
0010 <span class="comment">% Then for the purpose of this function A has dn elements, where</span>
0011 <span class="comment">% A(:,:,...,i) is the ith element.  This function then applies the</span>
0012 <span class="comment">% operation in fHandle, with paramters given in varargin, to each element</span>
0013 <span class="comment">% in A. The results are returned in the array B, of size f1 x f2 x ... x fk</span>
0014 <span class="comment">% x dn.  Each of the n element of B of the form B(:,:,...,i) is the the</span>
0015 <span class="comment">% result of applying fHandle to A(:,:,...,i).  A may also be a cell array,</span>
0016 <span class="comment">% see the last example.</span>
0017 <span class="comment">%</span>
0018 <span class="comment">% A limitation of fevalArrays is that it does not pass state information</span>
0019 <span class="comment">% to fHandle.  For example, fHandle may want to know how many times it's</span>
0020 <span class="comment">% been called.  This can be overcome by saving state information inside</span>
0021 <span class="comment">% fHandle using 'persistent' variables.  For an example see imwrite2.</span>
0022 <span class="comment">%</span>
0023 <span class="comment">% USAGE</span>
0024 <span class="comment">%  B = fevalArrays( A, fHandle, varargin )</span>
0025 <span class="comment">%</span>
0026 <span class="comment">% INPUTS</span>
0027 <span class="comment">%  A        - input array</span>
0028 <span class="comment">%  fHandle  - operation to apply to each 'element' of A</span>
0029 <span class="comment">%  params   - [varargin] parameters for each operation specified by fHandle</span>
0030 <span class="comment">%</span>
0031 <span class="comment">% OUTPUTS</span>
0032 <span class="comment">%  B        - output array</span>
0033 <span class="comment">%</span>
0034 <span class="comment">% EXAMPLE</span>
0035 <span class="comment">%  B = fevalArrays( A, @rgb2gray );      % where A is MxNx3xR</span>
0036 <span class="comment">%  B = fevalArrays( A, @imresize, .5 );  % where A is MxNxR</span>
0037 <span class="comment">%  B = fevalArrays( A, @imNormalize );   % where A has arbitrary dims</span>
0038 <span class="comment">%  B = fevalArrays( A, @(x) {imresize(x{1},.5)} ); % A is cell array</span>
0039 <span class="comment">%</span>
0040 <span class="comment">% See also FEVALIMAGES, FEVALMATS, ARRAYFUN</span>
0041 <span class="comment">% IMWRITE2, PERSISTENT, TICSTATUS,</span>
0042 <span class="comment">%</span>
0043 <span class="comment">% Piotr's Computer Vision Matlab Toolbox      Version 2.0</span>
0044 <span class="comment">% Copyright 2014 Piotr Dollar.  [pdollar-at-gmail.com]</span>
0045 <span class="comment">% Licensed under the Simplified BSD License [see external/bsd.txt]</span>
0046 
0047 nd = ndims(A);  siz = size(A);  n = siz(end);
0048 indsA = {<span class="string">':'</span>}; indsA = indsA(ones(nd-1,1));
0049 
0050 ticId = <a href="ticStatus.html" class="code" title="function id = ticStatus( msg, updateFreq, updateMinT, erasePrev )">ticStatus</a>(<span class="string">'fevalArrays'</span>,[],60);
0051 <span class="keyword">for</span> i=1:n
0052   <span class="comment">% apply fHandle to each element of A</span>
0053   b = feval( fHandle, A(indsA{:},i), varargin{:} );
0054   <span class="keyword">if</span>( i==1 )
0055     ndb = ndims(b);
0056     <span class="keyword">if</span>(ndb==2 &amp;&amp; size(b,2)==1); ndb=1; <span class="keyword">end</span>
0057     onesNdb = ones(1,ndb);
0058     B = repmat( b, [onesNdb,n] );
0059     indsB = {<span class="string">':'</span>}; indsB = indsB(onesNdb);
0060   <span class="keyword">else</span>
0061     B(indsB{:},i) = b;
0062   <span class="keyword">end</span>;
0063   <a href="tocStatus.html" class="code" title="function tocStatus( id, fracDone )">tocStatus</a>( ticId, i/n );
0064 <span class="keyword">end</span></pre></div>
<hr><address>Generated on Thu 05-May-2022 15:20:21 by <strong><a href="http://www.artefact.tk/software/matlab/m2html/" title="Matlab Documentation in HTML">m2html</a></strong> &copy; 2005</address>
</body>
</html>