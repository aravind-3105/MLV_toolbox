<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
                "http://www.w3.org/TR/REC-html40/loose.dtd">
<html>
<head>
  <title>Description of gradientHist</title>
  <meta name="keywords" content="gradientHist">
  <meta name="description" content="Compute oriented gradient histograms.">
  <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
  <meta name="generator" content="m2html v1.5 &copy; 2003-2005 Guillaume Flandin">
  <meta name="robots" content="index, follow">
  <link type="text/css" rel="stylesheet" href="../../../../m2html.css">
</head>
<body>
<a name="_top"></a>
<div><a href="../../../../index.html">Home</a> &gt;  <a href="../../../index.html">MLVcode</a> &gt; <a href="../../index.html">edges-master</a> &gt; <a href="#">toolbox-master</a> &gt; <a href="index.html">channels</a> &gt; gradientHist.m</div>

<!--<table width="100%"><tr><td align="left"><a href="../../../../index.html"><img alt="<" border="0" src="../../../../left.png">&nbsp;Master index</a></td>
<td align="right"><a href="index.html">Index for MLVcode\edges-master\toolbox-master\channels&nbsp;<img alt=">" border="0" src="../../../../right.png"></a></td></tr></table>-->

<h1>gradientHist
</h1>

<h2><a name="_name"></a>PURPOSE <a href="#_top"><img alt="^" border="0" src="../../../../up.png"></a></h2>
<div class="box"><strong>Compute oriented gradient histograms.</strong></div>

<h2><a name="_synopsis"></a>SYNOPSIS <a href="#_top"><img alt="^" border="0" src="../../../../up.png"></a></h2>
<div class="box"><strong>function H = gradientHist( M, O, varargin ) </strong></div>

<h2><a name="_description"></a>DESCRIPTION <a href="#_top"><img alt="^" border="0" src="../../../../up.png"></a></h2>
<div class="fragment"><pre class="comment"> Compute oriented gradient histograms.

 For each binSize x binSize region in an image I, computes a histogram of
 gradients, with each gradient quantized by its angle and weighed by its
 magnitude. If I has dimensions [hxw], the size of the computed feature
 vector H is floor([h/binSize w/binSize nOrients]).

 This function implements the gradient histogram features described in:
   P. Dollár, Z. Tu, P. Perona and S. Belongie
   &quot;Integral Channel Features&quot;, BMVC 2009.
 These features in turn generalize the HOG features introduced in:
   N. Dalal and B. Triggs, &quot;Histograms of Oriented
   Gradients for Human Detection,&quot; CVPR 2005.
 Setting parameters appropriately gives almost identical features to the
 original HOG or updated FHOG features, see hog.m and fhog.m for details.

 The input to the function are the gradient magnitude M and orientation O
 at each image location. See gradientMag.m for computing M and O from I.

 The first step in computing the gradient histogram is simply quantizing
 the magnitude M into nOrients [hxw] orientation channels according to the
 gradient orientation. The magnitude at each location is placed into the
 two nearest orientation bins using linear interpolation if softBin &gt;= 0
 or simply to the nearest orientation bin if softBin &lt; 0. Next, spatial
 binning is performed by summing the pixels in each binSize x binSize
 region of each [hxw] orientation channel. If &quot;softBin&quot; is odd each pixel
 can contribute to multiple spatial bins (using bilinear interpolation),
 otherwise each pixel contributes to a single spatial bin. The result of
 these steps is a floor([h/binSize w/binSize nOrients]) feature map
 representing the gradient histograms in each image region.

 Parameter settings of particular interest:
  binSize=1: simply quantize the gradient magnitude into nOrients channels
  softBin=1, useHog=1, clip=.2: original HOG features (see hog.m)
  softBin=-1; useHog=2, clip=.2: FHOG features (see fhog.m)
  softBin=0, useHog=0: channels used in Dollar's BMVC09 paper

 This code requires SSE2 to compile and run (most modern Intel and AMD
 processors support SSE2). Please see: http://en.wikipedia.org/wiki/SSE2.

 USAGE
  H = gradientHist( M, O, [binSize,nOrients,softBin,useHog,clipHog,full] )

 INPUTS
  M        - [hxw] gradient magnitude at each location (see gradientMag.m)
  O        - [hxw] gradient orientation in range defined by param flag
  binSize  - [8] spatial bin size
  nOrients - [9] number of orientation bins
  softBin  - [1] set soft binning (odd: spatial=soft, &gt;=0: orient=soft)
  useHog   - [0] 1: compute HOG (see hog.m), 2: compute FHOG (see fhog.m)
  clipHog  - [.2] value at which to clip hog histogram bins
  full     - [false] if true expects angles in [0,2*pi) else in [0,pi)

 OUTPUTS
  H        - [w/binSize x h/binSize x nOrients] gradient histograms

 EXAMPLE
  I=rgbConvert(imread('peppers.png'),'gray'); [M,O]=gradientMag(I);
  H1=gradientHist(M,O,2,6,0); figure(1); montage2(H1);
  H2=gradientHist(M,O,2,6,1); figure(2); montage2(H2);

 See also <a href="gradientMag.html" class="code" title="function [M,O] = gradientMag( I, channel, normRad, normConst, full )">gradientMag</a>, <a href="gradient2.html" class="code" title="function [Gx,Gy] = gradient2( I )">gradient2</a>, <a href="hog.html" class="code" title="function H = hog( I, binSize, nOrients, clip, crop )">hog</a>, <a href="fhog.html" class="code" title="function H = fhog( I, binSize, nOrients, clip, crop )">fhog</a>

 Piotr's Computer Vision Matlab Toolbox      Version 3.23
 Copyright 2014 Piotr Dollar &amp; Ron Appel.  [pdollar-at-gmail.com]
 Licensed under the Simplified BSD License [see external/bsd.txt]</pre></div>

<!-- crossreference -->
<h2><a name="_cross"></a>CROSS-REFERENCE INFORMATION <a href="#_top"><img alt="^" border="0" src="../../../../up.png"></a></h2>
This function calls:
<ul style="list-style-image:url(../../../../matlabicon.gif)">
</ul>
This function is called by:
<ul style="list-style-image:url(../../../../matlabicon.gif)">
<li><a href="chnsCompute.html" class="code" title="function chns = chnsCompute( I, varargin )">chnsCompute</a>	Compute channel features at a single scale given an input image.</li><li><a href="fhog.html" class="code" title="function H = fhog( I, binSize, nOrients, clip, crop )">fhog</a>	Efficiently compute Felzenszwalb's HOG (FHOG) features.</li><li><a href="hog.html" class="code" title="function H = hog( I, binSize, nOrients, clip, crop )">hog</a>	Efficiently compute histogram of oriented gradient (HOG) features.</li></ul>
<!-- crossreference -->



<h2><a name="_source"></a>SOURCE CODE <a href="#_top"><img alt="^" border="0" src="../../../../up.png"></a></h2>
<div class="fragment"><pre>0001 <a name="_sub0" href="#_subfunctions" class="code">function H = gradientHist( M, O, varargin )</a>
0002 <span class="comment">% Compute oriented gradient histograms.</span>
0003 <span class="comment">%</span>
0004 <span class="comment">% For each binSize x binSize region in an image I, computes a histogram of</span>
0005 <span class="comment">% gradients, with each gradient quantized by its angle and weighed by its</span>
0006 <span class="comment">% magnitude. If I has dimensions [hxw], the size of the computed feature</span>
0007 <span class="comment">% vector H is floor([h/binSize w/binSize nOrients]).</span>
0008 <span class="comment">%</span>
0009 <span class="comment">% This function implements the gradient histogram features described in:</span>
0010 <span class="comment">%   P. Dollár, Z. Tu, P. Perona and S. Belongie</span>
0011 <span class="comment">%   &quot;Integral Channel Features&quot;, BMVC 2009.</span>
0012 <span class="comment">% These features in turn generalize the HOG features introduced in:</span>
0013 <span class="comment">%   N. Dalal and B. Triggs, &quot;Histograms of Oriented</span>
0014 <span class="comment">%   Gradients for Human Detection,&quot; CVPR 2005.</span>
0015 <span class="comment">% Setting parameters appropriately gives almost identical features to the</span>
0016 <span class="comment">% original HOG or updated FHOG features, see hog.m and fhog.m for details.</span>
0017 <span class="comment">%</span>
0018 <span class="comment">% The input to the function are the gradient magnitude M and orientation O</span>
0019 <span class="comment">% at each image location. See gradientMag.m for computing M and O from I.</span>
0020 <span class="comment">%</span>
0021 <span class="comment">% The first step in computing the gradient histogram is simply quantizing</span>
0022 <span class="comment">% the magnitude M into nOrients [hxw] orientation channels according to the</span>
0023 <span class="comment">% gradient orientation. The magnitude at each location is placed into the</span>
0024 <span class="comment">% two nearest orientation bins using linear interpolation if softBin &gt;= 0</span>
0025 <span class="comment">% or simply to the nearest orientation bin if softBin &lt; 0. Next, spatial</span>
0026 <span class="comment">% binning is performed by summing the pixels in each binSize x binSize</span>
0027 <span class="comment">% region of each [hxw] orientation channel. If &quot;softBin&quot; is odd each pixel</span>
0028 <span class="comment">% can contribute to multiple spatial bins (using bilinear interpolation),</span>
0029 <span class="comment">% otherwise each pixel contributes to a single spatial bin. The result of</span>
0030 <span class="comment">% these steps is a floor([h/binSize w/binSize nOrients]) feature map</span>
0031 <span class="comment">% representing the gradient histograms in each image region.</span>
0032 <span class="comment">%</span>
0033 <span class="comment">% Parameter settings of particular interest:</span>
0034 <span class="comment">%  binSize=1: simply quantize the gradient magnitude into nOrients channels</span>
0035 <span class="comment">%  softBin=1, useHog=1, clip=.2: original HOG features (see hog.m)</span>
0036 <span class="comment">%  softBin=-1; useHog=2, clip=.2: FHOG features (see fhog.m)</span>
0037 <span class="comment">%  softBin=0, useHog=0: channels used in Dollar's BMVC09 paper</span>
0038 <span class="comment">%</span>
0039 <span class="comment">% This code requires SSE2 to compile and run (most modern Intel and AMD</span>
0040 <span class="comment">% processors support SSE2). Please see: http://en.wikipedia.org/wiki/SSE2.</span>
0041 <span class="comment">%</span>
0042 <span class="comment">% USAGE</span>
0043 <span class="comment">%  H = gradientHist( M, O, [binSize,nOrients,softBin,useHog,clipHog,full] )</span>
0044 <span class="comment">%</span>
0045 <span class="comment">% INPUTS</span>
0046 <span class="comment">%  M        - [hxw] gradient magnitude at each location (see gradientMag.m)</span>
0047 <span class="comment">%  O        - [hxw] gradient orientation in range defined by param flag</span>
0048 <span class="comment">%  binSize  - [8] spatial bin size</span>
0049 <span class="comment">%  nOrients - [9] number of orientation bins</span>
0050 <span class="comment">%  softBin  - [1] set soft binning (odd: spatial=soft, &gt;=0: orient=soft)</span>
0051 <span class="comment">%  useHog   - [0] 1: compute HOG (see hog.m), 2: compute FHOG (see fhog.m)</span>
0052 <span class="comment">%  clipHog  - [.2] value at which to clip hog histogram bins</span>
0053 <span class="comment">%  full     - [false] if true expects angles in [0,2*pi) else in [0,pi)</span>
0054 <span class="comment">%</span>
0055 <span class="comment">% OUTPUTS</span>
0056 <span class="comment">%  H        - [w/binSize x h/binSize x nOrients] gradient histograms</span>
0057 <span class="comment">%</span>
0058 <span class="comment">% EXAMPLE</span>
0059 <span class="comment">%  I=rgbConvert(imread('peppers.png'),'gray'); [M,O]=gradientMag(I);</span>
0060 <span class="comment">%  H1=gradientHist(M,O,2,6,0); figure(1); montage2(H1);</span>
0061 <span class="comment">%  H2=gradientHist(M,O,2,6,1); figure(2); montage2(H2);</span>
0062 <span class="comment">%</span>
0063 <span class="comment">% See also gradientMag, gradient2, hog, fhog</span>
0064 <span class="comment">%</span>
0065 <span class="comment">% Piotr's Computer Vision Matlab Toolbox      Version 3.23</span>
0066 <span class="comment">% Copyright 2014 Piotr Dollar &amp; Ron Appel.  [pdollar-at-gmail.com]</span>
0067 <span class="comment">% Licensed under the Simplified BSD License [see external/bsd.txt]</span>
0068 
0069 H = gradientMex(<span class="string">'gradientHist'</span>,M,O,varargin{:});</pre></div>
<hr><address>Generated on Thu 05-May-2022 15:20:21 by <strong><a href="http://www.artefact.tk/software/matlab/m2html/" title="Matlab Documentation in HTML">m2html</a></strong> &copy; 2005</address>
</body>
</html>