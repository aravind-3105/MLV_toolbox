<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
                "http://www.w3.org/TR/REC-html40/loose.dtd">
<html>
<head>
  <title>Description of hog</title>
  <meta name="keywords" content="hog">
  <meta name="description" content="Efficiently compute histogram of oriented gradient (HOG) features.">
  <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
  <meta name="generator" content="m2html v1.5 &copy; 2003-2005 Guillaume Flandin">
  <meta name="robots" content="index, follow">
  <link type="text/css" rel="stylesheet" href="../../../../m2html.css">
</head>
<body>
<a name="_top"></a>
<div><a href="../../../../index.html">Home</a> &gt;  <a href="../../../index.html">MLVcode</a> &gt; <a href="../../index.html">edges-master</a> &gt; <a href="#">toolbox-master</a> &gt; <a href="index.html">channels</a> &gt; hog.m</div>

<!--<table width="100%"><tr><td align="left"><a href="../../../../index.html"><img alt="<" border="0" src="../../../../left.png">&nbsp;Master index</a></td>
<td align="right"><a href="index.html">Index for MLVcode\edges-master\toolbox-master\channels&nbsp;<img alt=">" border="0" src="../../../../right.png"></a></td></tr></table>-->

<h1>hog
</h1>

<h2><a name="_name"></a>PURPOSE <a href="#_top"><img alt="^" border="0" src="../../../../up.png"></a></h2>
<div class="box"><strong>Efficiently compute histogram of oriented gradient (HOG) features.</strong></div>

<h2><a name="_synopsis"></a>SYNOPSIS <a href="#_top"><img alt="^" border="0" src="../../../../up.png"></a></h2>
<div class="box"><strong>function H = hog( I, binSize, nOrients, clip, crop ) </strong></div>

<h2><a name="_description"></a>DESCRIPTION <a href="#_top"><img alt="^" border="0" src="../../../../up.png"></a></h2>
<div class="fragment"><pre class="comment"> Efficiently compute histogram of oriented gradient (HOG) features.

 Heavily optimized code to compute HOG features described in &quot;Histograms
 of Oriented Gradients for Human Detection&quot; by Dalal &amp; Triggs, CVPR05.
 This function is made largely obsolete by fhog, see fhog.m for details.

 If I has dimensions [hxw], the size of the computed feature vector H is
 floor([h/binSize w/binSize nOrients*4]). For each binSize x binSize
 region, computes a histogram of gradients, with each gradient quantized
 by its angle and weighed by its magnitude. For color images, the gradient
 is computed separately for each color channel and the one with maximum
 magnitude is used. The centered gradient is used except at boundaries
 (where uncentered gradient is used). Trilinear interpolation is used to
 place each gradient in the appropriate spatial and orientation bin.

 For each resulting histogram (with nOrients bins), four different
 normalizations are computed using adjacent histograms, resulting in a
 nOrients*4 length feature vector for each region. To compute the
 normalizations, first for each block of adjacent 2x2 histograms we
 compute their L2 norm (over all 4*nOrient bins). Each histogram (except
 at boundaries) thus has 4 different normalization values associated with
 it. Each histogram bin is then normalized by each of the 4 different L2
 norms, resulting in a 4 times expansion of the number of bins. Finally,
 any bin whose value is bigger than &quot;clip&quot; is set to &quot;clip&quot;.

 The computed features are NOT identical to those described in the CVPR05
 paper. Specifically, there is no Gaussian spatial window, and other minor
 details differ. The choices were made for speed of the resulting code:
 ~.008s for a 640x480x3 color image on a standard machine from 2011.

 This function is essentially a wrapper for calls to gradientMag()
 and gradientHist(). Specifically, it is equivalent to the following:
  [M,O] = gradientMag( I ); softBin = 1; useHog = 1;
  H = gradientHist(M,O,binSize,nOrients,softBin,useHog,clip);
 See gradientHist() for more general usage.

 This code requires SSE2 to compile and run (most modern Intel and AMD
 processors support SSE2). Please see: http://en.wikipedia.org/wiki/SSE2.

 USAGE
  H = hog( I, [binSize], [nOrients], [clip], [crop] )

 INPUTS
  I        - [hxw] color or grayscale input image (must have type single)
  binSize  - [8] spatial bin size
  nOrients - [9] number of orientation bins
  clip     - [.2] value at which to clip histogram bins
  crop     - [0] if true crop boundaries

 OUTPUTS
  H        - [h/binSize w/binSize nOrients*4] computed hog features

 EXAMPLE
  I=imResample(single(imread('peppers.png')),[480 640])/255;
  tic, for i=1:125, H=hog(I,8,9); end; toc % ~1s for 125 iterations
  figure(1); im(I); V=hogDraw(H,25); figure(2); im(V)

 See also <a href="hogDraw.html" class="code" title="function V = hogDraw( H, w, fhog )">hogDraw</a>, <a href="gradientHist.html" class="code" title="function H = gradientHist( M, O, varargin )">gradientHist</a>

 Piotr's Computer Vision Matlab Toolbox      Version 3.23
 Copyright 2014 Piotr Dollar.  [pdollar-at-gmail.com]
 Licensed under the Simplified BSD License [see external/bsd.txt]</pre></div>

<!-- crossreference -->
<h2><a name="_cross"></a>CROSS-REFERENCE INFORMATION <a href="#_top"><img alt="^" border="0" src="../../../../up.png"></a></h2>
This function calls:
<ul style="list-style-image:url(../../../../matlabicon.gif)">
<li><a href="gradientHist.html" class="code" title="function H = gradientHist( M, O, varargin )">gradientHist</a>	Compute oriented gradient histograms.</li><li><a href="gradientMag.html" class="code" title="function [M,O] = gradientMag( I, channel, normRad, normConst, full )">gradientMag</a>	Compute gradient magnitude and orientation at each image location.</li></ul>
This function is called by:
<ul style="list-style-image:url(../../../../matlabicon.gif)">
</ul>
<!-- crossreference -->



<h2><a name="_source"></a>SOURCE CODE <a href="#_top"><img alt="^" border="0" src="../../../../up.png"></a></h2>
<div class="fragment"><pre>0001 <a name="_sub0" href="#_subfunctions" class="code">function H = hog( I, binSize, nOrients, clip, crop )</a>
0002 <span class="comment">% Efficiently compute histogram of oriented gradient (HOG) features.</span>
0003 <span class="comment">%</span>
0004 <span class="comment">% Heavily optimized code to compute HOG features described in &quot;Histograms</span>
0005 <span class="comment">% of Oriented Gradients for Human Detection&quot; by Dalal &amp; Triggs, CVPR05.</span>
0006 <span class="comment">% This function is made largely obsolete by fhog, see fhog.m for details.</span>
0007 <span class="comment">%</span>
0008 <span class="comment">% If I has dimensions [hxw], the size of the computed feature vector H is</span>
0009 <span class="comment">% floor([h/binSize w/binSize nOrients*4]). For each binSize x binSize</span>
0010 <span class="comment">% region, computes a histogram of gradients, with each gradient quantized</span>
0011 <span class="comment">% by its angle and weighed by its magnitude. For color images, the gradient</span>
0012 <span class="comment">% is computed separately for each color channel and the one with maximum</span>
0013 <span class="comment">% magnitude is used. The centered gradient is used except at boundaries</span>
0014 <span class="comment">% (where uncentered gradient is used). Trilinear interpolation is used to</span>
0015 <span class="comment">% place each gradient in the appropriate spatial and orientation bin.</span>
0016 <span class="comment">%</span>
0017 <span class="comment">% For each resulting histogram (with nOrients bins), four different</span>
0018 <span class="comment">% normalizations are computed using adjacent histograms, resulting in a</span>
0019 <span class="comment">% nOrients*4 length feature vector for each region. To compute the</span>
0020 <span class="comment">% normalizations, first for each block of adjacent 2x2 histograms we</span>
0021 <span class="comment">% compute their L2 norm (over all 4*nOrient bins). Each histogram (except</span>
0022 <span class="comment">% at boundaries) thus has 4 different normalization values associated with</span>
0023 <span class="comment">% it. Each histogram bin is then normalized by each of the 4 different L2</span>
0024 <span class="comment">% norms, resulting in a 4 times expansion of the number of bins. Finally,</span>
0025 <span class="comment">% any bin whose value is bigger than &quot;clip&quot; is set to &quot;clip&quot;.</span>
0026 <span class="comment">%</span>
0027 <span class="comment">% The computed features are NOT identical to those described in the CVPR05</span>
0028 <span class="comment">% paper. Specifically, there is no Gaussian spatial window, and other minor</span>
0029 <span class="comment">% details differ. The choices were made for speed of the resulting code:</span>
0030 <span class="comment">% ~.008s for a 640x480x3 color image on a standard machine from 2011.</span>
0031 <span class="comment">%</span>
0032 <span class="comment">% This function is essentially a wrapper for calls to gradientMag()</span>
0033 <span class="comment">% and gradientHist(). Specifically, it is equivalent to the following:</span>
0034 <span class="comment">%  [M,O] = gradientMag( I ); softBin = 1; useHog = 1;</span>
0035 <span class="comment">%  H = gradientHist(M,O,binSize,nOrients,softBin,useHog,clip);</span>
0036 <span class="comment">% See gradientHist() for more general usage.</span>
0037 <span class="comment">%</span>
0038 <span class="comment">% This code requires SSE2 to compile and run (most modern Intel and AMD</span>
0039 <span class="comment">% processors support SSE2). Please see: http://en.wikipedia.org/wiki/SSE2.</span>
0040 <span class="comment">%</span>
0041 <span class="comment">% USAGE</span>
0042 <span class="comment">%  H = hog( I, [binSize], [nOrients], [clip], [crop] )</span>
0043 <span class="comment">%</span>
0044 <span class="comment">% INPUTS</span>
0045 <span class="comment">%  I        - [hxw] color or grayscale input image (must have type single)</span>
0046 <span class="comment">%  binSize  - [8] spatial bin size</span>
0047 <span class="comment">%  nOrients - [9] number of orientation bins</span>
0048 <span class="comment">%  clip     - [.2] value at which to clip histogram bins</span>
0049 <span class="comment">%  crop     - [0] if true crop boundaries</span>
0050 <span class="comment">%</span>
0051 <span class="comment">% OUTPUTS</span>
0052 <span class="comment">%  H        - [h/binSize w/binSize nOrients*4] computed hog features</span>
0053 <span class="comment">%</span>
0054 <span class="comment">% EXAMPLE</span>
0055 <span class="comment">%  I=imResample(single(imread('peppers.png')),[480 640])/255;</span>
0056 <span class="comment">%  tic, for i=1:125, H=hog(I,8,9); end; toc % ~1s for 125 iterations</span>
0057 <span class="comment">%  figure(1); im(I); V=hogDraw(H,25); figure(2); im(V)</span>
0058 <span class="comment">%</span>
0059 <span class="comment">% See also hogDraw, gradientHist</span>
0060 <span class="comment">%</span>
0061 <span class="comment">% Piotr's Computer Vision Matlab Toolbox      Version 3.23</span>
0062 <span class="comment">% Copyright 2014 Piotr Dollar.  [pdollar-at-gmail.com]</span>
0063 <span class="comment">% Licensed under the Simplified BSD License [see external/bsd.txt]</span>
0064 
0065 <span class="keyword">if</span>( nargin&lt;2 ), binSize=8; <span class="keyword">end</span>
0066 <span class="keyword">if</span>( nargin&lt;3 ), nOrients=9; <span class="keyword">end</span>
0067 <span class="keyword">if</span>( nargin&lt;4 ), clip=.2; <span class="keyword">end</span>
0068 <span class="keyword">if</span>( nargin&lt;5 ), crop=0; <span class="keyword">end</span>
0069 
0070 softBin = 1; useHog = 1; b = binSize;
0071 [M,O] = <a href="gradientMag.html" class="code" title="function [M,O] = gradientMag( I, channel, normRad, normConst, full )">gradientMag</a>( I );
0072 H = <a href="gradientHist.html" class="code" title="function H = gradientHist( M, O, varargin )">gradientHist</a>(M,O,binSize,nOrients,softBin,useHog,clip);
0073 <span class="keyword">if</span>( crop ), e=mod(size(I),b)&lt;b/2; H=H(2:end-e(1),2:end-e(2),:); <span class="keyword">end</span>
0074 
0075 <span class="keyword">end</span></pre></div>
<hr><address>Generated on Thu 05-May-2022 14:52:24 by <strong><a href="http://www.artefact.tk/software/matlab/m2html/" title="Matlab Documentation in HTML">m2html</a></strong> &copy; 2005</address>
</body>
</html>